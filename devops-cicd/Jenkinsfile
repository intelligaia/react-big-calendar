def git_url = 'https://github.com/intelligaia/react-big-calendar.git'
def git_branch = 'V1'

pipeline
{
    agent
    {
        label 'worker-1'
    }

    stages
    {
        stage('build-code')
        {
            
            steps{
                   sh '''
                   npm install
                   npm run build
                   '''
            }
        }
        stage('copy-build')
        {
            
            steps{
                   sh '''
                   pwd
                   ls
                   pwd
                   rsync -parv * ubuntu@72.31.30.244:/home/ubuntu/react-big-calendar
                   '''
            }
        }
        stage('app-restart'){
            agent {
                label "teza.projectsjunction"
            }
            
            steps{
                   sh '''
                   sudo systemctl restart nginx
                   '''
            }
        }
    }
}
